name: validar-hola

on: [push]

jobs:
  validar:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Ejecutar y validar Hola.js
        run: |
          salida=$(node Hola.js)
          echo "Salida: $salida"

          if [ "$salida" != "hola mundo" ]; then
            echo "Salida incorrecta"
            curl -X POST https://ntfy.sh/devops-itla -d "Fallo: Hola.js no devolvi√≥ 'hola mundo'"
            exit 1
          fi

          echo "Salida correcta"

